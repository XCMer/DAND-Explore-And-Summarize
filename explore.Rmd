Red Wine Data Analysis by Raahul Seshadri
========================================================

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that you end up using in your analysis in this code
# chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk. This
# prevents the code from displaying in the knitted HTML output. You should set
# echo=FALSE for all code chunks in your file, unless it makes sense for your
# report to show the code that generated a particular plot.

# The other parameters for "message" and "warning" should also be set to FALSE
# for other code chunks once you have verified that each plot comes out as you
# want it to. This will clean up the flow of your report.

library(ggplot2)
library(dplyr)
```

```{r echo=FALSE, Load_the_Data}
# Load the Data
winedata <- read.csv('wineQualityReds.csv')
```

I don't have much experience with wine. However, I did notice that we have a feature called "quality", and
my analysis will revolve around finding out correlations of other variables to quality.

# Univariate Plots Section

We'll go through the summary of the dataset and a few univariate plots to understand the structure of the data.

## Summary of the dataset

```{r echo=FALSE}
summary(winedata)
```

```{r}
nrow(winedata)
ncol(winedata)
```

We observe the following:

1. There are 1599 observations across 13 features.
1. As mentioned on the website, there are no missing values for any of the features.
1. All the fields are numeric in nature.
1. Quality is the only field that's human-defined. Rest of the fields are chemical properties of the wine. It'd be interesting to find the relationship between these numeric variables and the quality.

## Distribution of quality

```{r echo=FALSE}
ggplot(aes(x = quality), data = winedata) +
  geom_histogram(binwidth = 1) +
  scale_x_continuous(breaks = 1:10, limits = c(1, 10))
```

Observations:
1. Quality ranges from 3 to 8.
2. No wine in the dataset has been rated with a quality of 1, 2, 9, and 10.
3. Most of the wine have a quality rating of 5 or 6, which is much more in comparison to the good/bad wines.

## Distribution of a few numeric features

I'll first look at a few numeric features and their distributions. There are no categorical features. I will not be getting rid of any outliers in my univariate analysis, because I can't be sure yet if they are errors, or whether the data was collected in such a way that we see outliers. For example, the distribution of quality is disproportionate as we saw above.

The bin-width has to set by looking at the min/max value. I explicitly set the `bins` instead of the `binwidth`, since it is more convenient. Every variable has a different range.

### Fixed acidity

```{r echo=FALSE}
ggplot(aes(x = fixed.acidity), data = winedata) +
  geom_histogram(bins = 30) +
  scale_x_continuous()
```

Observations:
1. The data is positively skwewed with mean at 8.32 (as per the statistics we calculated earlier).
1. The median is 7.90.

### Volatile acidity

```{r echo=FALSE}
ggplot(aes(x = volatile.acidity), data = winedata) +
  geom_histogram(bins = 30) +
  scale_x_continuous()
```

Observations:
1. Looks positively skewed with a mean of 0.5278, and median of 0.5200.

### Citric acid

```{r echo=FALSE}
ggplot(aes(x = citric.acid), data = winedata) +
  geom_histogram(binwidth=0.1) +
  scale_x_continuous()
```

Observations:
1. Definitely not normal. Although I tried the binwidth of 0.05 (for higher resolution), I settled on 0.1 so that I can see the trend clearly.
1. Towards the end, I can see some missing values (somewhere between 0.75 and 1.0).

### pH

The value of pH ranges from 0 to 14 (15 values). I've chosen 30 as the bin size so that I get a 0.5 resolution on the pH.

```{r echo=FALSE}
ggplot(aes(x = pH), data = winedata) +
  geom_histogram(bins=30) +
  scale_x_continuous(breaks=seq(0, 14, 0.5))
```

Observations:
1. The distribution is again normal with mean 3.311 and median 3.310 (indicating no skew).

### Residual sugar

```{r echo=FALSE}
ggplot(aes(x = residual.sugar), data = winedata) +
  geom_histogram(binwidth=0.5) +
  scale_x_continuous()
```

Observations:
1. Positively skewed normal with a lot of outliers on the positive end.

### Density

I iterated on the number of bins from 10 to 20 to 40, till I was satisfied with the visual resolution.

```{r echo=FALSE}
ggplot(aes(x = density), data = winedata) +
  geom_histogram(bins=40)
```

Observations:
1. Normally distributed around mean 0.9967.

### Chlorides

```{r echo=FALSE}
ggplot(aes(x = chlorides), data = winedata) +
  geom_histogram(binwidth=0.01)
```

Observations:
1. A positively skewed normal distribution with a lot of outliers.

### Alcohol

```{r echo=FALSE}
ggplot(aes(x = alcohol), data = winedata) +
  geom_histogram(binwidth=0.5)
```

Observations:
1. Positively skewed distribution.

# Univariate Analysis

### What is the structure of your dataset?
There are 1599 observations across 13 features. As mentioned on the website, there are no missing values for any of the features.

All the fields are numeric in nature. Quality is the only field that's human-defined. Rest of the fields are chemical properties of the wine.

Apart from citric acid, all the other plots were normally distributed, or normally distributed with a positive skew. I saw an unusually large tail of outliers in the case of residual sugar and chlorides.

### What is/are the main feature(s) of interest in your dataset?
The main feature of interest was the "quality", since it was human-determined. There are no categorical variables of interest, so all numeric variables with normal distribution look about the same in a univariate analysis.

To get more information about which numeric features are of importance, we'll need to do a bivariate analysis on the numeric feature and quality. The correlation between numeric features can also be found to detect redundance.

### What other features in the dataset do you think will help support your \
The dataset did mention that the quality is the median of at least 3 evaluations made by wine experts. It'd be interesting to know the difference in the scoring of the same wine between evaluations. Any difference above 1 on either side could be statistically significant and can indicate the presence of bias.

### Did you create any new variables from existing variables in the dataset?
No, I did not.

### Of the features you investigated, were there any unusual distributions? \
I did not transform any of the data. Although the Udacity video mentioned that "normalizing" data is required to apply linear regression, it is incorrect. The data can be in any format, the error has to be normally distributed.

The only unusual distribution that I saw was for citric acid, which did not follow a normal pattern.

# Bivariate Plots Section

I'll first plot the correlations between all variables. This will help me inspect the right ones. I'll only look at values that are >= 0.25 in either direction. Correlations lesser in magnitude than 0.25 can also tell us a lot about the dataset, but I'm confining my investigation to the major features.

```{r echo=FALSE}
cor(winedata)
```

Below, I enumerate all correlations that I'd explore later (>= 0.25).

Observations on quality:
1. Volatile acidity (-0.390557780)
2. Sulphates (0.251397079)
3. Alcohol (0.47616632)

Observations on fixed acidity:
1. Volatile acidity (-0.25613089)
2. Density (0.66804729)
3. pH (-0.68297819)

Observations on volatile acidity:
1. Fixed acidity (-0.25613089)
2. Citric acid (-0.55249568)
3. pH (0.23493729) (this is not more than 0.25, but it's positive for some reason)
4. Sulphates (-0.260986685)
5. Quality (-0.39055778)

Observations on citric acid:
1. Fixed acidity (0.67170343)
2. Volatile acidity (-0.552495685)
3. Density (0.36494718)
4. pH (-0.54190414)
5. Sulphates (0.312770044)

Observations on residual sugar:
1. Density (0.35528337)

Observations on chloride:
1. pH (-0.26502613)
2. Sulphates (0.371260481)

Observations on free sulphur dioxide:
1. Total sulphur dioxide (0.66766645)

Observations on total sulphur dioxide:
1. Free sulphur dioxide (0.667666450)

Observations on density:
1. Fixed acidity (0.66804729)
2. Citric acid (0.36494718)
3. Residual sugar (0.355283371)
4. pH (-0.34169933)
5. Alcohol (-0.49617977)

Observations on pH:
1. Fixed acidity (-0.68297819)
2. Citric acid (-0.54190414)
3. Chlorides (-0.265026131)
4. Density (-0.34169933)
5. Volatile acidity (0.23493729) (this is not more than 0.25, but it's positive for some reason)

Observations on sulphates:
1. Volatile acidity (-0.260986685)
2. Citric acid (0.31277004)
3. Chlorides (0.371260481)
4. Quality (0.25139708)

Observations on alcohol:
1. Density (-0.49617977)
2. Quality (0.47616632)

## Analysis of features with strong correlation with quality

Let's take a look at features that have a correlation with quality, namely: Volatile acidity, sulphates, alcohol

### Alcohol and quality

```{r echo=FALSE}
ggplot(aes(x = alcohol, y = quality), data = winedata) +
  geom_point()
```

It's difficult to decipher the above scatterplot. While we know that there's a correlation, a boxplot might give us more insights.

```{r echo=FALSE}
ggplot(aes(x = as.factor(quality), y = alcohol), data = winedata) +
  geom_boxplot()
```

Observations:
1. The box plot is much clearer in showing that higher quality wines have a higher alcohol content.
2. Quality level 5 has the highest number of outliers. It's hard to say why this is the case as of now.

### Sulphates and quality

```{r echo=FALSE}
ggplot(aes(x = as.factor(quality), y = sulphates), data = winedata) +
  geom_boxplot()
```

Observations:
1. While the relationship is not as strong as alcohol vs. quality, sulphates do show positive correlation to quality.
2. Thus, higher quality alcohols tend to have higher medians of sulphates.
3. Quality 5 again has the highest number of outliers. It could be that average alcohols were the most common choice in the dataset by the human reviewers, and these people might have decided to err on the side of average.

### Volatile acidity and quality

```{r echo=FALSE}
ggplot(aes(x = as.factor(quality), y = volatile.acidity), data = winedata) +
  geom_boxplot()
```
Observations:
1. A clear negative trend. Higher quality alcohols have lower amount of volatile acidity.
2. Quality score 5 has a quantity of outliers comparabable to Quality 6, but more spaced out. When it comes to quality score of 5, the variables we've analysed so far say very little about the quality in isolation. A combination of these features could tell us more about why a certain alcohol got a quality rating 5.

## Relationship between various acidity parameters

I see three features on acidity, "fixed.acidity", "volatile.acidity", "citric.acidity". We also know their correlation with each other. Let's visualize it.

```{r echo=FALSE}
ggplot(aes(x = fixed.acidity, y = volatile.acidity), data = winedata) +
  geom_point()
```

```{r echo=FALSE}
ggplot(aes(x = fixed.acidity, y = citric.acid), data = winedata) +
  geom_point()
```

```{r echo=FALSE}
ggplot(aes(x = volatile.acidity, y = citric.acid), data = winedata) +
  geom_point()
```

Observations:
1. These observations corroborate the correlation coefficients that we calculated earlier. 
1. Fixed and volatile acidity don't have a strong correlation (pearson coeff of magnitude 0.25)
1. However, fixed and citric show signs of positive correlation (pearson coeff of 0.67)
1. Volatile and citric acid show signs of negative correlation (pearson coeff of -0.55)

## pH and density

```{r echo=FALSE}
ggplot(aes(x = pH, y = density), data = winedata) +
  geom_point()
```

Let's look at a boxplot for a better view of the correlation.

```{r echo=FALSE}
ggplot(aes(x = as.factor(ceiling(pH*4)/4), y = density), data = winedata) +
  geom_boxplot()
```

In order to make the boxplot feasible, I multiply the pH by 4 and find the "ceiling." This gives me an integer, which I then divide by 4 again. In essence, pH gets grouped in sections of 0.25, and allows me to plot a boxplot by treating the pH groups as a factor.

Observations:
1. With increasing pH, we observe decreasing density.

## Volatile acidity vs. pH

For some reason, volatile acidity has a positive correlation with pH.

```{r echo=FALSE}
ggplot(aes(x = pH, y = volatile.acidity), data = winedata) +
  geom_point()
```

```{r echo=FALSE}
ggplot(aes(x = as.factor(ceiling(pH*4)/4), y = volatile.acidity), data = winedata) +
  geom_boxplot()
```

```{r echo=FALSE}
ggplot(aes(x = as.factor(ceiling(pH*4)/4), y = volatile.acidity), data = filter(winedata, quality==6)) +
  geom_boxplot()
```

For quality score 6, the anomalous relationship between pH and acidity is even more apparent.

Observations:
1. Since lower pH should generally mean higher acidity, this relationship is anomalous.
2. However, we're talking about volatile acidity here. As per "http://waterhouse.ucdavis.edu/whats-in-wine/volatile-acidity", there is a specific method to measuring volatile acidity. Thus, I'm assuming that you cannot detect its presence solely by using a "litmus" test.
3. Thus, the relationship between pH and volatile acidity might not really exist, and could be driven a third variable instead (say, fixed.acidity). For example, fixed acidity shows negative correlation with pH, and fixed acidity also shows negative correlation with volatile acidity. By extension, pH is bound to show positive correlation with volatile.acidity. But it could be fixed acidity driving the relation, whereas there is no causation between volatile.acidity and pH.

# Bivariate Analysis

### Talk about some of the relationships you observed in this part of the \
investigation. How did the feature(s) of interest vary with other features in \
the dataset?

1. There were strong correlations of alcohol, volatile acidity, and sulphates with quality.
2. There seemed to be an unusual positive correlation between volatile acidity and pH, but it turned out to be a red herring. It was fixed acidity's correlation with pH and volatile acidity, whereas volatile acidity is measured using specialized methods.

### Did you observe any interesting relationships between the other features \
(not the main feature(s) of interest)?

1. The most interesting one was between pH and volatile acidity as I explained above.

### What was the strongest relationship you found?

1. The relationship between fixed.acidity and pH was the strongest, with a pearson coefficient of 0.68. However, this relationship is not a surprise and rather scientific.
2. However, the strongest pertinent one was between alcohol and quality, with a pearson coefficient of 0.47.

# Multivariate Plots Section

> **Tip**: Now it's time to put everything together. Based on what you found in
the bivariate plots section, create a few multivariate plots to investigate
more complex interactions between variables. Make sure that the plots that you
create here are justified by the plots you explored in the previous section. If
you plan on creating any mathematical models, this is the section where you
will do that.

```{r echo=FALSE, Multivariate_Plots}

```

# Multivariate Analysis

### Talk about some of the relationships you observed in this part of the \
investigation. Were there features that strengthened each other in terms of \
looking at your feature(s) of interest?

### Were there any interesting or surprising interactions between features?

### OPTIONAL: Did you create any models with your dataset? Discuss the \
strengths and limitations of your model.

------

# Final Plots and Summary

> **Tip**: You've done a lot of exploration and have built up an understanding
of the structure of and relationships between the variables in your dataset.
Here, you will select three plots from all of your previous exploration to
present here as a summary of some of your most interesting findings. Make sure
that you have refined your selected plots for good titling, axis labels (with
units), and good aesthetic choices (e.g. color, transparency). After each plot,
make sure you justify why you chose each plot by describing what it shows.

### Plot One
```{r echo=FALSE, Plot_One}

```

### Description One


### Plot Two
```{r echo=FALSE, Plot_Two}

```

### Description Two


### Plot Three
```{r echo=FALSE, Plot_Three}

```

### Description Three

------

# Reflection

> **Tip**: Here's the final step! Reflect on the exploration you performed and
the insights you found. What were some of the struggles that you went through?
What went well? What was surprising? Make sure you include an insight into
future work that could be done with the dataset.

> **Tip**: Don't forget to remove this, and the other **Tip** sections before
saving your final work and knitting the final report!